---
title: 硬件基础篇
cover: /img/num125.webp
categories:
  - 硬件
comments: false
katex: true
abbrlink: f1b90b6e
date: 2023-04-15 18:00:28
---



## 前言

学习硬件是因为我的弱项就是硬件，想通过学习硬件来加强自己的弱项！



## 电阻

备注：电阻旁边写着NC表示此处空贴，即此处不贴任何电子器件，如果安装的话，电路会有另外的功能，或许在性能上会有变化

### 理论讲解

`电阻定义`：电荷在导体中运动时，形成电流。导体中的分子、原子等其他粒子阻碍电荷移动，进而阻碍电流，这种阻碍作用，我们称之为电阻

电阻单位为`Ω`，电阻越大，阻碍作用越大，电流越小。

>  $I(\text{安培A}) = \frac{U(\text{伏特V})}{R(\text{欧姆}Ω)}$

> 单位换算：1KΩ = 1000Ω；1MΩ = 1000KΩ；1mΩ = 0.001Ω

### 选型

基于产品越来越趋向于小巧、生产工艺不断提升、后焊人工成本高等考虑， 绝大部分产品选择 `贴片电阻`

> 根据电路，选择合适的阻值
>
> 常见阻值
>
> ![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230415203144.webp)

> 贴片电阻标称
>
> - 其中“04”表示长和宽的尺寸分别为0.04英寸，即1.0mm x 0.5mm，而“02”表示厚度为0.02英寸，即0.5mm， `0402` 指的是一种贴片电阻封装规格
>
> ![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230415203540.webp)
>
> - 第一个数字表示有效数字1、第二个数字表示有效数字2、第三个数字表示乘数0(即10的多少次方)，单位 `Ω`
>
> ![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230415205103.webp)
>
> - `R` 表示小数点，单位 `Ω`
>
> ![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230415205439.webp)
>
> - 2701Ω就是2.7KΩ
>
> ![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230415205658.webp)
>
> - 跟上面333计算一样
>
> ![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230415210146.webp)
>
> - 小于1Ω的，开头是R，表示 `0.`
>
> ![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230415210313.webp)

> 非常规电阻，通过 `串联` 或者 `并联`
>
> ![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230415210659.webp)

> 确认电阻值的方法：
>
> 分 `计算取值`， `手册取值` ， `经验取值`
>
> 1. 计算取值分压电压，反馈电路，取样电路，根据电路计算即可
> 2. 手册取值设计电路时，参考手册应用电路，按建议取值
> 3. 经验取值比如 `上拉，一般1k，4.7k，10k，100k等`，电阻越小，上拉越强，下拉也是。

- 封装与功耗

> 公式：$P(\text{瓦特W}) = U(\text{电压V})*I(\text{电流A})$

它功耗对应不同的封装，比如0603它功耗不能超过 `1/10` W，但一般来说我们不会超过它的80%，即 `0.1*0.8 = 0.08W`

还有就是看板子大小，小的板子就选择小点的封装，优先选择0603

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230415212002.webp)

- 精度

综合考虑电路性能，成本，采购方便性，合理选择精度，常规精度为 `5%，1%`

电路方面：

> 电压反馈电路，取样电路等，要求1%精度，其他默认5%精度

成本方面:

> 5%精度比1%精度便宜，满足需求的情况下，尽量选择低成本的

采购方面:

> 如果有5个1%精度的10k电阻，有3个5%的精度的10k电阻，而产品对成本又没有过高的要求，可以统一使用1%精度的，减少物料采购种类，也方便贴片

比如这个，就需要大点的精度了1%( `上限：5 + 1% × 5 = 5 + 0.05 = 5.05V 下限：5 - 1% × 5 = 5 - 0.05 = 4.95V`)，如果使用5%精度可能误差就有点大( `上限：5 + 5% × 5 = 5 + 0.25 = 5.25V 下限：5 - 5% × 5 = 5 - 0.25 = 4.75V`)

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230415213156.webp)

其他那些的话不需要精度高就5%就行了

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230415214022.webp)

- 成本

满足要求的情况下，选择成本低的

- PCB板尺寸

PCB尺寸很小时，可以选择0402，甚至0201的;PCB尺寸适中时，可以选择0603的，对工艺要求低些

- 工艺

满足需求的情况下，尽量不选择过小封装的，降低工艺要求

- 维修

满足需求的情况下，尽量不选择过小封装的，降低维修难度



### 阅读数据手册

- 风华高科 - 常规厚膜片式固定电阻器 

了解一下手册的命名方法

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230415215414.webp)



### 仪器测量

`工具`：万用表

`测量方法`：万用表调节至 `欧姆档` ，表笔位于V/Q与COM接口，笔头放置在电阻两端进行测量

`注意事项`： `不要带电测量电阻`；如果电阻安装在电路板上，确定电阻两端是否受其他电路影响； `选择自动量程`，如果手动量程，量程与实际值不要相差过大，影响测量精度



### 产品应用

- 限流

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230415221325.webp)

> `R50`：限制发光二极管D6的电流。$I= \frac{(3.3V -1.6V)}{470Ω} = 3.6mA$，因为当PG13推挽输出时管脚电压是3.3V，发光二极管两端电压是1.6(不同颜色灯可能不一样)，为什么加电阻呢因为这个LED它有限制电流的，比如不能超过20mA，如果超过就会烧掉了
>
> `R51`：限制晶体管Q2的电流，使其工作在饱和状态，因为对于常见的硅晶体管（NPN/PNP型），其基极与发射极之间的压降大约在 `0.6-0.7V` 左右，如果将3.3V直接加到NPN/PNP型晶体管的基极上，可能会出现以下两种情况：
>
> 1. 基极电流过大，导致晶体管损坏：由于晶体管的放大作用，一旦将高电平直接接到基极上，晶体管会自动进入饱和区，产生极大电流。因此，需要通过限流电阻来控制基极电流，从而避免超过晶体管的最大额定电流而损毁
> 2. 基极-发射结电压超过额定值，导致晶体管损坏：晶体管的基极-发射结具有一定的正向电压降，如果直接把3.3V信号加到基极上，电压降就会超过额定值，导致基极-发射结失效而损坏晶体管
>
> 可以通过计算公式来确认限流电阻的大小或者计算基极电流值：
>
> $\text{R限 = (V信号 - VBE) / I限}$
>
> (`R限表示限流电阻的电阻值；V信号表示信号源的输出电压（即3.3V）；VBE表示晶体管的基极-发射结电压降（通常为0.6到0.7V）；I限表示限制基极电流的电流值`)
>
> $\text{I限流值=}\frac{(3.3V - 0.6V)}{1K}= 2.7mA$，即该晶体管的基极电流为2.7mA，这个电流应该在NPN型晶体管的额定电流之内(不同型号晶体管额定电流不一样)，这个NPN型号是 `S8050`它的额定电流是700mA， 所以不会导致晶体管的损坏

- 恒流

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230416145607.webp)

`R21`：对锂电池快速充电时，充电电流恒定在3A，因为CSP和BAT固定电压是120mA

- 分压

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230416151431.webp)

`R32，R35，R45`：通过分压，使LDO输出电压为2.5V

- 取样

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230416151828.webp)

`R21`：通过取样，将4-20mA电流转化为0.6V-3V电压( `U1=IR=0.004*150=0.6V U2=IR=0.02*150=3V`)，供ADC采样

- 阻抗匹配

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230416152547.webp)

`R26`: RS-485阻抗匹配电阻，满足长距离传输时，减少终端反射，一般通讯用得多

- 上拉，下拉

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230416152839.webp)

`R4，R5`：上拉电阻(电阻接电源)，让IIC总线默认为高电平

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230416153316.webp)

`R62`:下拉电阻(电阻接地)，确保PA8为浮空时，Q4(PNP)为截止状态。



### 0Ω电阻

零欧姆电阻又称为 `跨接电阻器`，是一种特殊用途的电阻，0欧姆电阻的阻值并非为零。风华高科对0Q贴片电阻有三个精度等级，分别是 `F档(≤10mQ)、G档(≤20mQ2)、J档(≤50mQ)`

> 常规用途：
>
> - 备用功能
>
> ![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230416154310.webp)
>
> 电源电路放置了2个0Ω电阻，方便调试或维修时，断开某一路电源，需要时，也可以更换为磁珠等。，比如上电发现板子不工作，那我可以把这些电阻断开，然后一个个加上去测试看看哪里出现问题
>
> (`磁珠也叫磁性射频滤波器。它通常是一颗小型的磁铁，由磁性材料制成，内部包含一个或多个线圈。磁珠可以用来实现电路中的高频滤波、信号隔离和噪声抑制等功能`)
>
> - 可以作为数字地与模拟地的跨接电阻，地线分开，方便走线与覆铜
>
> 如果两个地之间没有电阻连接，可能会导致一些毛刺和噪声，影响系统性能和稳定性
>
> (`数字地和模拟地是在电路设计中常见的两种地，它们分别为数字信号处理部分和模拟信号处理部分提供电源和信号参考。数字地主要用于数字电路，例如微处理器、数字信号处理器、FPGA等数字电路，而模拟地主要用于模拟电路，例如放大器、滤波器、ADC/DAC等电路`)
>
> - 作为配置短路使用。这个作用类似拨码开关，但是可以避免用户随意修改配置。通过安装不同位置的电阻，可以实现不同的功能。比如TFT屏幕就可以通过0Q电阻设置8位或16位数据总线。
> - 预留参数调整
>
> ![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230416155452.webp)
>
> `R83`：预留GSM天线匹配电路，因为有时候你不知道这里的值是多少，可以用0Ω代替后面再把具体值改回去



### 热敏电阻

热敏电阻器是敏感元件的一类，按照温度系数不同分为 `正温度系数热敏电阻器(PTC也叫自恢复保险丝)` 和 `负温度系数热敏电阻器(NTC)`

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230416161231.webp)

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230416162916.webp)

热敏电阻器的典型特点是对 `温度敏感`， `不同的温度下表现出不同的电阻值`。正温度系数热敏电阻器(PTC)在 `温度越高时电阻值越大`，负温度系数热敏电阻器(NTC)在 `温度越高时电阻值越低`，它们同属于 `半导体器件`。

- NTC热敏电阻用于开关电源启动限流

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230416160320.webp)

`RT1作用`：电源启动时，输入电容C5电压为0，充电瞬间电流很大。有了RT1，启动时限制充电电流，一旦RT1发热，阻值降低，相当于短接了。

电容充放电的公式：$I = C \times \frac{dV}{dt}$

(`I 表示电容器中的电流，C 表示电容器的电容量，dV/dt 表示电容器电压随时间的变化率`)

- 通过NTC电阻测量温度

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230416161802.webp)

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230416161959.webp)

`RT1`:B型NTC热敏电阻(CMFB103F3950FANT)，温度与阻值呈现一定关系，通过ADC采集电压，计算电阻，即可测出环境温度

- PTC电阻用于短路保护

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230416162600.webp)

`F2`: PTC电阻，输出短路时，PTC阻值发热，阻值变大，启动短路保护作用。此电路不能用于高温环境中，合理使用。当你把短接拿开后温度慢慢降下来然后又恢复原样，不同型号它的最大承受电压电流不一样，看实际电路选择合适的

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230416163305.webp)



### 光敏电阻

光敏电阻器是利用半导体的光电效应制成的一种电阻值随入射光的强弱而改变的电阻器; `入射光强、电阻减小、入射光弱、电阻增大`。

> 应用于摄像头红外灯板:
>
> ![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230416163753.webp)
> 
`工作原理`:白天，光线较强，CDS阻值很小，Q1导通，U1的EN管脚为OV，停止工作灯灭;夜晚，光线较暗，CDS阻值很大，Q1截止，U1的EN管脚有电压，正常工作，灯亮。



### 色环电阻

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230901125151.webp)

### 习题

- 电阻R21上的功耗范围为多少?

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230416165129.webp)

`答`：这是一个ADC电路，PG5相当于高阻态，所以电流方向就是上面箭头方向，直接使用公式计算即可：

$P = I^2R$

$Pmin = 4mA*4mA*150Ω=2.4mW$

$pmax = 20mA*20mA*150Ω=60mW$

结果是 `2.4mW~60mW` 而这个电阻是0603，它的功耗是1/10W也就是最大是100mW，所以如果计算结果知道是满足的

- 如下图，哪些方面设计不合理?

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230416170055.webp)

`答`：这个电路用到NTC，所以应该是测量温度，那应该要求精度高，所以R11精度就应该取高点的1%或者以上

①提高温度测量精度，电阻R11应该使用1%精度的

②降低成本，电阻 R12应该使用5%精度的

③R11与C13均为0603封装，R12封装应一致，使用0603



## 电容

### 理论讲解

参考视频：https://www.bilibili.com/video/BV14S4y127UR/?spm_id_from=333.337.search-card.all.click

`概念`：两个相互靠近的金属板中间夹一层绝缘介质组成的器件，当两端存在电势差时，由于介质阻碍了电荷移动而累积在金属板上，衡量金属板上储存电荷的能力称之为电容，相应的器件称为电容器。电容的符号为 `C`，单位为 `法(F)`。 `电容越大，储存电荷的能力越强`。

> 电路图中电容的符号表示通常有两种，分别是 `欧姆表现法` 和 `法拉第表现法`。
>
> 欧姆表现法的电容符号是 `两条平行的直线`，表示两个电极之间没有其他电路元件连接。这种表示法通常用于简单的电路图中，因为它简单、清晰，易于理解。
>
> 而法拉第表现法的电容符号则是 `一条曲线和一条直线`组成，表示电容器是由两个电极之间的电介质隔开的。这种表示法更加详细，可以告诉我们电容器内部有一个电介质，还有一个正极和一个负极。通常用于较为复杂的电路图中，或者需要对电容器进行具体分析和计算时使用。
>
> 需要注意的是，这 `两个符号表示法的本质是相同的，只是表述方式不同，所表示的电容器是相同的`

> 我们可以把电容器想象成一个装有水的水槽，水的高度表示电容器的电荷量，而水的流动则对应着电容器的充电和放电。
>
> 当电容器接入电源时，和水槽中的水流入过程类似，电荷会流入电容器并累积在电容板上，直到达到一定的电压或电荷量。这个过程就是电容器的充电过程。
>
> 当电容器断开电源时，就像水槽中打开出水口一样，电荷会从电容器中流出，并释放出储存的能量。这个过程就是电容器的放电过程。
>
> 而滤波器的作用，则类似于给水槽装上阀门一样，通过合适设计的滤波电路，可以对电容器输出的电压进行平滑处理，从而起到稳定电源的作用。

> 公式：$C= \frac{Q}{U}$ 
>
> ( `C-电容，Q-电荷量，U-电势差`)
> 在电路学里，在电势差1U下，电容器的储存电荷的能力，称为电容。
>
> 单位换算：
>
> 法拉单位很大，通常使用uF, nF, pF
>
> $1F = 10^3mF = 10^6uF = 10^9nF = 10^12pF$

- 电容的作用

电容的本质是充电与放电，在电路中起到阻直流通交流的作用。

`阻直流`:只充电，不放电。充满后无法放电，断开状态

`通交流`:循环充电与放电。按交流信号频率循环充放电，导通状态。

> 电容内部有绝缘介质，内部永远不会导通，通交流是应用电容的充放电功能，从外部看，感觉导通了而已。

> 电容充放电电流计算公式:
>
> $I = C \times \frac{dV}{dt}$
>
> 在电路设计中，要特别注意电容的充放电电流。有时为了加快信号上升速度，需要提高充放电电流;有时为了防止充电电流过大损坏其他器件，需要减小充放电电流，从公式中可以看出，电压越高，充放电时间越短，电容越大，充放电电流越大，反之则充放电电流越小。

`电容特性`：充放电有个过程，电容两端电压不能突变，如果突变，将会产生很大的充放电电流，设计时需要避免，可以通过电阻，电感等器件进行限流。

`电容类型`：方便理解，对电容进行类型区分，但需要记住， `电容的本质就是储能，充放电`。

1. `滤波电容`:用在滤波电路中的电容器称为滤波电容
2. `旁路电容`:用在旁路电路中的电容器称为旁路电容
3. `耦合电容`:用在耦合电路中的电容称为耦合电容
4. `退耦电容`:用在退耦电路中的电容器称为退耦电容
5. `自举电容`:用在自举电路中的电容器称为自举电容
6. ...



### 器件选型

- 安装方式

插件(DIP)与贴片(SMD)

 `陶瓷电容`， `铝电解电容`， `钽电解电容` 一般选择 `贴片`的

 `安规电容`一般是 `插件`的；铝电解电容，降低成本，也有选择插件的

长脚是+极，短脚-极

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230416175538.webp)

- 电容值

根据电路，选择合适的电容值。电容值从几pF到几百几千uF不等，确定方法如下:

1. 计算取值晶体震荡电路，LC滤波电容等，可以通过计算取值;
2. 手册取值设计电路时，参考手册应用电路，按建议取值
3. 经验取值滤波电容，储能电容等，一般凭经验取值，再根据实际测试进行调整。

- 电容串联并联

 `电容串联` :耐压增大，容值减小

 `电容并联`:耐压不变，容值增大

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230416175913.webp)

- 电容类型

根据电路，合理选择电容类型。

> 按容值:
>
> 一般小于10uF的，优先选择陶瓷电容
>
> 小于几百uF的，可以选择铝电解电容与钽电解电容
>
> 大于几百uF的，一般选择铝电解电容

> 按环境温度:
>
> 高温环境，一般选择陶瓷电容与钮电容，因为铝电解电容里面是电解液，高温环境对寿命影响较大
>
> 低温环境，都可以选择

- 耐压，封装

根据电路，确定电容耐压值，再选择封装。封装越大，耐压越大。

耐压方面，陶瓷电容较好，钽电解电容较差(要求耐压为承受电压的2倍)

例如:给5V电源滤波，可以选用10uF/6.3V的陶瓷电容，100uF/6.3V的铝电解电容，也可以选用47uF/10V的B型钽电解电容。

常用陶瓷电容封装: `0402，0603，0805，1206`等

常用贴片铝电解电容封装: `5*5.5,6.3*7.7`等

常用钮电解电容封装: `A型，B型，C型，D型，E型`等

- 寿命

铝电解电容较差，内部电解质受温度影响较大，但因为耐压可以，容值较大，价格便宜，使用较多，设计时避免靠近热源，不要在高温环境使用。

- 价格

钽电容较贵，插件铝电解电容便宜，容值大的陶瓷也较贵，在满足需求的情况下，尽量选择低成本的。

`ESR`:陶瓷电容与钽电解电容都较小，滤波效果好。铝电解电容可以通过并联容值小的陶瓷电容降低ESR，提升滤波效果。



### 陶瓷电容

`优点`: 无极性，耐压较好，耐温好，ESR小，滤波效果好

`缺点`: 容值小，一般使用10uF以下的容值大，耐压高的价格贵

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230416183040.webp)



### 电解电容

- 铝电解电容

 `铝电解电容优点`：容值大，耐压好，价格便宜

`缺点`: ESR大，耐温差

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230416184126.webp)

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230416185502.webp)

> 纹波电流是指在交流电源或变换器的输出端口上出现的交流成分，由于电源输出的电压不是完美的直流电压，在其上会有一定大小的交流成分，这就是纹波电流。纹波电流可能会带来一些不良影响，例如增加电源和负载的温升、降低系统的效率等

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230416185749.webp)



- 钽电解电容

`优点`: 容值大，耐温好，ESR小

`缺点`: 价格贵，耐压差

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230416184809.webp)

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230416190330.webp)

> `正负极`：常规器件，有丝印标记的一端一般为负极，比如二极管，铝电解电容; `但钮电解电容有丝印标记的为正极，如果接反了，会烧毁`



### 安规电容

`定义`：失效后，不会导致电击，不危及人身安全的电容器，称之为安规电容

- 分类

X电容和Y电容

`X电容`：跨接在电力线（L-N)之间的电容，一般选用 `金属薄膜电容`

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230416191048.webp)

`Y电容`：跨接在电力线和地之间（(L-E，N-E）的电容，一般是 `成对`出现

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230416191210.webp)

> L（Line）表示电源的“火线”，N（Neutral）表示电源的“零线”

- 应用

一般应用于开关电源中，X电容抑制差模干扰，Y电容抑制共模干扰

- 安全等级

X电容分为 `X1，X2，X3`∶X1耐高压大于2.5 kV，小于等于4 kV；X2耐高压小于等于2.5 kV；X3耐高压小于等于1.2 kV

Y电容分为 `Y1，Y2，Y3，Y4`∶1Y1耐高压大于8 kV; Y2耐高压大于5 kV; Y3耐高压n/a; Y4耐高压大于2.5 kv



### 演示电容充放电

将电容+极接电源，然后-极碰一下即可充电完成(很快的)，然后万用表测量一下电压，放电的话可以直接使用镊子碰两个引脚，可能会有火花(因为电流很大)，很正常，但是不会爆炸(电容爆炸是因为超过它的额定电压)

也可以使用LED进行放电看现象，可以把两个20K电阻绕一起(并联)就是一个10K电阻，然后电阻一端绕电容+极，然后另一端接LED+极，电容-极接LED-极，LED就会亮，然后慢慢的暗下去等放完电



### 产品应用

- 陶瓷电容应用于滤波

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230416212451.webp)

电源电路，负载电流较小时，可以使用陶瓷电容进行滤波

- 铝电解电容用于滤波

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230416213259.webp)

电源电路，负载电流较大时，使用铝电解电容进行滤波，为了降低ESR，提升滤波效果，通过并联陶瓷电容。

- 钽电解电容用于滤波

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230416214451.webp)

GPRS模块电源管脚，瞬间电流可达2A，选择低ESR，高容量的钽电解电容，避免压降过大导致模块重启。

- LC滤波

> 如果电路中有 `电感器和电容器`，并且它们之间有 `串联或并联`的连接方式，那么这个电路就是一个LC滤波电路
>
> 当电感与电容并联时，组成的电路为 `LC并联滤波电路`；而当电感与电容串联时，组成的电路为 `LC串联滤波电路`。

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230416214637.webp)

PWM脉宽调制电源中，使用LC进行滤波，将PWM波形滤成直流电压，达到调压的目的。

> 如果滤波只使用电容，上电瞬间，电源芯片内部NMOS管导通时，滤波电容C9瞬间充电电流很大，将烧毁内部NMOS管或出现短路保护，无法正常工作。
> 使用LC进行滤波， `电感起到限制电流的作用，电感电流不能突变`，很好的限制了滤波电容的充电电流，同时利用储能，也可以起到滤波作用，构成LC滤波器



- 储能电容1

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230416215556.webp)

电容C55给VOUT1提供能量缓冲，避免VOUT1负载电流变化时干扰VCC电源。可以把VOUT1比喻成水龙头，C55比喻成蓄水池，当瞬间打开水龙头时，蓄水池提供足够的水，不影响其他地方用水。

> C55不能放在U12后面，否则，U12打开时，C55充电电流很大，会下拉VCC电压，同时，有可能烧毁U12



- 储能电容2

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230416215843.webp)

C1作为U2储能电容，避免后面的数码管打开时，瞬间耗电较大影响3.3V电源。



- 储能电容3

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230416220036.webp)

数字IC的电源管脚━般需要放置储能电容。

> 小电容 --- 为高频信号(内部开关信号)提供瞬间能量，通常为0.1uF，频率越高，电容越小
>
> 大电容 --- 为低频信号(内部外设耗电)提供能量



- 自举电路

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230416220303.webp)

利用电容C73的充放电特性构成自举电路，驱动芯片内部的功率NMOS管



- 旁路电容

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230416220547.webp)

C25为高频信号提供低阻抗回路，提高电源稳定性



- 震荡电路

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230416220710.webp)

电容C39、C52与晶体构成震荡电路，提供时钟信号输出



## 电感

### 理论讲解

参考文章：https://www.bilibili.com/video/BV1o7411A7nw/?spm_id_from=333.337.search-card.all.click&vd_source=5fb3f08926cbdbc6d84b3f2bda38c0b1

`定义`：将漆包线、纱包线或塑皮线等在绝缘骨架或磁心、铁心上绕制而成的器件，当线圈通过电流后，在线圈中形成磁场感应，感应磁场又会产生感应电流来阻碍线圈中电流的变化，这种电流与线圈的相互作用关系称为电的感抗，也就是电感，相应的器件成为电感器。

电感的符号为 `L`，单位为 `亨利(H)`。电感越大，感抗能力越强。

> 电感总是试图阻碍自身的电流变化，是一种自然现象。电感器是根据自然现象制成的元器件

单位换算：
亨利单位很大，通常使用 `mH`, `uH`

$1H = 10^3mH = 10^6uH$

- 自感与互感

电感线圈通过电流时，线圈的周围产生磁场，当线圈中电流发生变化时，其周围的磁场也产生相应的变化，此变化的磁场阻碍电流的变化，成为自感。

两个电感线圈相互靠近时，一个电感线圈的磁场变化将影响另一个电感线圈，这种影响就是互感。互感的大小取决于电感线圈的自感与两个电感线圈耦合的程度，利用此原理制成的元件叫做互感器。

- 感应电压

电感线圈产生自感时，感应电流通过负载维持电流变化，将产生感应电压。感应电压的大小取决于感应电流与负载，感应电流与负载越大，感应电压越大，反之越小。

> 电感突然断开时，需要提供合理的续流路径，否则负载很大，将会产生很高的感应电压，损坏电路。比如BUCK降压与电磁继电器电路中的续流二极管，就是给电感提供续流路径的，减小感应电压。

- 电感的作用

电感的本质是阻碍自身的电流变化，在电路中起到 `通直流阻交流` 的作用。

`通直流`: 流过电感的电流无变化时，电感相当于导线，不过，与导线的区别是，电感周围会产生磁场;
`阻交流`: 注意，是阻碍，不是阻止。电感阻碍电流变化，让电流变化变缓。

- 电路应用

① 滤波︰电感阻碍电流变化，与电容C组成LC滤波器
② 升压：利用感应电压，达到升压效果，比如BOOST升压电路

...



### 选型

- 电感类型

`常用电感类型`: 贴片高频电感，功率电感，共模电感，差模电感

`贴片高频电感`: 高频信号滤波，小功率LC滤波

`功率电感`: LC滤波，升压

`共模电感`: 滤除共模信号

`差模电感`: 滤除差模信号

- 电感值

根据电路，选择合适的电感值。电感值越大，感抗越大，对电流的阻碍越大。

> 分计算取值，手册取值，经验取值
>
> 1. 计算取值 LC滤波电路，可以根括中心频率计算：$f=\sqrt{2πLC}$
> 2. 手册取值设计电路时，参考手册典型应用电路，按建议取值;
> 3. 经验取值凭经验取值，再根据实际测试进行调整。

> 电感串联与并联
> `电感串联`: 感值增大，对电流的阻碍作用加强
>
> `电感并联`: 感值减小，对电流的阻碍作用减小



- DCR

电感的直流阻抗。导线必定存在电阻，此电阻导致电感发热，根据$P=I^2R$， `DCR越小越好`。



- 饱和电流

电感饱和电流， `当流过电感的电流超过饱和电流时，电感作用将降低，甚至失效，变成一根导线，损坏短路`。应用中一定要避免电感中的电流超过饱和电流，可靠性考虑，尽量留有一定裕量。

比如BUCK降压，如果电感饱和了，LC滤波变成C滤波，电容充电电流将损坏PWM开关管，电路失效。

`饱和电流取值`: 流过电感的电流导致感值降为 `70%` 时，此时的电流为饱和电流。如果电流进一步增加，电感性能将降低，甚至失效。

- 封装

选择封装，需要考虑结构高度，PCB尺寸，感值，饱和电流，DCR，成本等，满足需求的情况下， `尽量选择小些封装的`。

- 成本

满足需求的情况下，尽量选择价格便宜的



### 功率电感

特点: `感值高，功率大，饱和电流大，封装尺寸相对较大`

应用: `低频LC滤波，升压`

> 带屏蔽的功率电感比非屏蔽的EMl效果好些，但价格稍贵些。
>
> EMI是指 `电磁干扰`，它是指电磁场中的能量在环境中传播时，对其他设备或线路产生的感受性、传导性或耦合性干扰。这些干扰信号可以造成设备或线路的错误或失效，并可能会对无线通信或其他电子设备带来负面影响。

下图中线圈裸露的是非屏蔽的，有外壳的是屏蔽的

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230417114515.webp)

-  `功率电感  - 顺络 SWPA系列`

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230417115244.webp)

- `功率电感 - chilisin(奇力新) MHCC、MHCI系列`

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230417120352.webp)

### 贴片电感

特点: `感值小，功率小，饱和电流小，封装尺寸小`

应用: 高频信号滤波

`没有+-极之分`

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230417120919.webp)

- `贴片电感 - 风华 叠层片式高频电感`

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230417121119.webp)



### 共模与差模电感

- 共模电感

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230417121325.webp)

`构成`: 两组直径与圈数相同的线圈，方向相反的绕制在同一个铁芯上，引出4个引脚。

`作用`: 滤除共模干扰信号，降低EMI

`共模信号`: 大小相等、方向相同的信号

- 差模电感

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230417121546.webp)

`构成`: 一组线圈绕制在铁芯上，引出2个引脚。

`作用`: 滤除差模干扰信号，降低EMI，一般成对出现。

`差模信号`: 大小相等、方向相反的信号。

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230417122118.webp)

### 产品应用

- BUCK降压

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230417141650.webp)

`说明`: LC滤波器，采用功率电感，电感饱和电流至少大于平均电流的 `4/3` (经验值)，将电源PWM波滤成直流电压，改变PWM占空比即可改变直流电压，达到降压的目的。 `D14为电感L4进行续流，为续流二极管，必不可少`。

> BUCK电路得名于其降压（step-down）的特性。BUCK的英文原义是“雄鹿”，与升压型DC-DC转换器Boost得名于其升压（step-up）特性相对应。当直流电压需要被降低时，BUCK电路是一种有效的选择。
>
> 在BUCK电路中，通过开关管周期性地切换电压源和负载之间的连接，利用电感器的电能存储和释放，将输入电压降低到所需的输出电压水平。因为这个操作过程中，电压是先上升，然后下降到较低水平，就像雄鹿扬起头然后向下冲击一样，因此这种电路就被称为BUCK电路。



- BOOST升压

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230417142042.webp)

`说明`：利用电感的感应电压进行升压。

> 在Boost电路中，电源电压通过一个电感器和一个开关管交替连接到负载电容器上，从而实现电压升高。当开关管关闭时，电感器通过自感作用将电能存储到电感器中；当开关管打开时，电感器发生自感电势，将电能传递到负载电容器中，使其电压升高。同时，负载电容器也可以平滑输出电压，减少电压的纹波



- 电源LC滤波

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230417142329.webp)

`说明`：LC低频滤波

- 贴片电感

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230417161348.webp)

`说明`：LC低频滤波，负载电流小，使用贴片电感



- 共模电感用于开关电源输入部分

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230417161643.webp)



## 二极管

### 理论讲解

- PN结

一块一侧掺杂成P型半导体，另一侧掺杂成N型半导体，中间二者相连的接触面称为PN结。PN结是电子技术中许多元件，例如半导体二极管、双极性晶体管的物质基础。

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230418095758.webp)

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230418095847.webp)

`P区接正极，N区接负极`，这是由PN结的内部结构决定的。

在P型半导体中，杂质原子掺入了三价元素，如硼（B），形成了较多的空穴；在N型半导体中，杂质原子掺入了五价元素，如磷（P），形成了较多的自由电子。当P型半导体和N型半导体直接结合时，两种半导体的空隙区域中出现大量的不完整电子和空穴，在这些区域内发生了多种载流子之间的复合过程，从而形成了p-n结。

- PN结伏安特性曲线

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230418100546.webp)

> - PN结不加外部电压
>
> 内部处于平衡状态，多子扩散运动等于少子漂移运动，电流i = 0
>
> - PN结加外加正向电压
>
> u<Uon时，正向电流i≈0;
> u>Uon时，正向电流i随电压u随指数增长;
>
> - PN结加外加反向电压
>
> |u| < |Ubr| 时，反向电流i = Is，Is很小，通常忽略不计
> |u| > |Ubr| 时，反向电流i急剧增加，称之为反向击穿，此原理制成稳压管，TVS管等
>
> 其中: Uon为正常开启电压，Ubr为反向击穿电压

`结论`：PN结具有单向导电性。外加正向且大于Uon开启电压时，PN结导通;外加正向且小于Uon或外加反向且小于Ubr时，PN结截止;外加反向电压且大于Ubr时，PN结反向击穿。

- 二极管构成

将PN结用外壳封装起来，并加上电极引线构成半导体二极管，简称二极管。由P区引出的电极为阳极，由N区引出的电极为阴极。

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230418102943.webp)

> PN结导通时的结压降通常只有零点几伏，而导通电流随外加电压的增大呈指数增长，应用时，需要串联电阻等元器件限制回路的电流，防止PN结因正向电流过大而损坏。



### 通用二极管

{% note blue 'fas fa-fan' flat %}通用开关二极管{% endnote %}

`特点`: 电流小，工作频率高

`选型依据`: 正向电流、正向压降、功耗，反向最大电压，反向恢复时间，封装等

参考手册：BAS316，IN4148WS

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230418104137.webp)

> "Reverse recovery time"，中文翻译为“反向恢复时间”，指的是 PN 结二极管在由正向电压工作（导通）状态下，突然变为反向偏置（截止）状态后，从截止状态回到正向工作状态的过程中所需的时间。换句话说，就是 PN 结二极管截止后，反向电流消失至某一特定值所需的时间。
>
> 反向恢复时间越短，说明二极管的传输速度越快，开关速度也会更快。但是如果反向恢复时间过短，可能会导致电压或电流尖峰值过高而损坏 PN 结二极管或其他器件

- 应用

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230418104507.webp)

`说明`: 应用于低电平复位电路中，当电源快速断电再上电时，开关二极管提供电容C1的快速放电回路,让MCU进行可靠复位。

{% note blue 'fas fa-fan' flat %}通用整流二极管{% endnote %}

`特点`: 电流大，工作频率低

`选型依据`: 正向电流、正向压降、功耗，反向最大电压，封装等

参考手册：1N4007



- 应用

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230418105859.webp)

`说明`: 将交流电，经常桥路整流，再滤波成直流电。



### 肖特基二极管

- 定义

肖特基二极管不是利用P型半导体与N型半导体接触形成PN结原理制作的，而是贵金属(金、银、铝、铂等) `A为正极，以N型半导体`， `B为负极`，利用二者接触面上形成的势垒具有整流特性而制成的金属-半导体器件。

- 优缺点

`优点`: 开关频率高，正向压降低(低至0.2V，电流越大，压降越大)

`缺点`: 反向击穿电压低，反向漏电流偏大(温度越高，漏电流越大)

- 应用场合

肖特基二极管的结构及特点使其适合于在低压、高频、大电流，比如BUCK降压的续流二极管，BOOST升压的隔离二极管等。

- 选型依据

正向电流、正向压降、功耗，反向最大电压，封装等

参考手册：DSK34

- 应用

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230418110354.webp)

`说明`: 肖特基应用于防反接与电源隔离中。

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230418110404.webp)

`说明`: 肖特基二极管D14，应用于BUCK拓扑的续流二极管，符合高频、低压、大电流场合。

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230418110417.webp)

`说明`: 肖特基二极管D1，提供电机线圈电感的续流路径，符合高频、低压、大电流场合



### 发光二极管

`定义`：LED是一种能够将电能转化为光能的半导体，主要由支架、银胶、晶片、金线、环氧树脂五种物料所组成。

当电子与空穴复合时能辐射出可见光，因而可以用来制成发光二极管。砷化该二极管发红光，磷化该二极管发绿光，碳化硅二极管发黄光，氮化家二极管发蓝光。

`应用场合`：在电路及仪器中作为指示灯，或者组成文字或数字显示。数码管，LED点阵，LED广告屏，LED显示屏等均是LED灯构成的。

- 选型依据

`颜色`: 红，绿，蓝，黄，白，三基色等

`封装`: 单颗(贴片，插件)，数码管(各种尺寸)，点阵，定制等

`功率`: 小功率，大功率
`亮度`: 普通亮度，高亮度

参考手册：红色发光二极管

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230418113054.webp)

> 正向压降: 发光二极管的正向压降大致在 `1.5V至3.3V`。红色的 `1.6V~1.8V;`绿色的 `2V~2.4V`;蓝色/白色的 `3V~3.3V`
>
> 正向电流:小功率的一般最大20mA， `使用时需要串联限流电阻`。

- 产品应用

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230418113324.webp)

`说明`: 应用于指示灯，电流 $I =\frac{(5V - 1.6V)}{10k} = 0.34mA$



### 稳压管

`定义`：稳压二极管(又叫齐纳二极管)是一种硅材料制成的面接触型晶体二极管，简称稳压管。此二极管是一种直到临界反向击穿电压前都具有很高电阻的半导体器件。

稳压管在反向击穿时，在一定的电流范围内(或者说在一定功率损耗范围内)，两端电压几乎不变，表现出稳压特性，因而广泛应用于稳压电源与限幅电路之中。

稳压二极管是 `根据击穿电压来分档` 的，因为这种特性，稳压管主要被作为稳压器或电压基准元件使用。

在电路里一般 `反向接入`，也就是利用它的反向特性，利用PN结雪崩效应，在反向击穿前均有一个临界电压，在反向接入电路都具有稳压作用

参考手册：LM3Z7V5T1G

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230418114441.webp)

`参数1`: 稳压值，根据电路选择
`参数2`: 反向电流，实际使用，不可以超过反向电流值，需要串联电阻限流。

- 产品应用

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230418114631.webp)

`说明`: 稳压管D5限制NMOS管的Vgs电压最大值为5.1V，避免VIN输入电压过大，导致Vgs电压值过大损坏NMOS管。



### TVS管

`定义`：TVS管，全称瞬变电压抑制二极管，是在稳压管工艺基础上发展起来的一种新产品，其电路符号和普通稳压二极管相同。当TVS管两端经受瞬间的高能量冲击时，它能以极高的速度使其阻抗骤然降低，同时吸收一个大电流，将其两端间的电压箝位在一个预定的数值上，从而确保后面的电路元件免受瞬态高能量的冲击而损坏。

当被保护电路瞬间出现浪涌脉冲电压时，双向击穿二极管能迅速齐纳击穿，由高阻状态变为低阻状态，对浪涌电压进行分流和箝位，从而保护电路中各元件不被瞬间浪涌脉冲电压损坏。

> 稳压二极管和TVS二极管的电路符号和稳压二极管基本相同，封装也差不多，稳压二极管利用的是把输入电压固定在某个数值，而TVS二极管主要是防止瞬态高压对后级电路进行钳位

- 伏安特性曲线

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230418115048.webp)

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230418115059.webp)

分析上图可知: 双向TVS正反特性相同，使用时不需要注意方向，并联在电路中可以抑制浪涌。但单向TVS管正反特性不同，正向导通压降很低，没法做浪涌保护，我们需要使用反向击穿部分的特性， `并联在电路中时，正极接单向TVS管的负极`。

> “浪涌”（surge）是指短时间内电路中出现的瞬间、突然的大幅电压或电流变化。浪涌可以由多种因素造成，比如断电、闪电、电源开关、电感阻抗等等，都可能导致电路中出现瞬间变化的幅值高的电压或电流。这种电压或电流的瞬态变化会对电子器件、电气线路和电力设备等产生不利影响。

参考手册：SMBJ

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230418115531.webp)

`参数1`: Vrmw，反向关闭电压，此时TVS管不起作用，此电压必须大于VIN最大输入电压

`参数2`: Vbr，反向击穿电压，必须小于浪涌电压

`参数3`: lpp，峰值脉冲电流

此外，还需要考虑单向还是双向，封装类型，最大功耗等。

- 产品应用

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230418122228.webp)

`说明`: 双向TVS管应用于电源输入，抑制浪涌。

> 此处如果使用单向TVS管，必须放置在防反接肖特基D12的后面，否则的话，电源反接，单向TVS管刚好正接，正向导通电流很大，将烧毁单向TVS管。

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230418122438.webp)

`说明`: 单向TVS管应用于抑制尖峰干扰电压，避免损坏GPRS模块。



## 三极管

### 理论讲解

`定义`：根据不同的掺杂方式在同一个硅片上制造出 `三个掺杂区域`，并形成 `两个PN结`，即构成BJT晶体管

通常三个极：`基极，集电极(漏极)，发射极`

- 类型

1. NPN三极管

如下图，NPN型三极管，由三块半导体构成，其中 `两块N型和一块P型` 半导体组成，P型半导体在中间，两块N型半导体在两侧。

<img src="https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230418124319.webp" style="zoom:50%;" />

> 基区--P型半导体，很薄且杂质浓度很低，引出基极b
>
> 发射区--N型半导体，杂质浓度很高，自由电子很多，引出发射极
>
> e集电区--N型半导体，杂质浓度很低，但面积很大，引出集电极c

2. PNP三极管

如下图，PNP型三极管，由三块半导体构成，其中 `两块P型和一块N型` 半导体组成，N型半导体在中间,两块P型半导体在两侧。

<img src="https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230418124602.webp" style="zoom:50%;" />

> 基区--N型半导体，很薄且杂质浓度很低，引出基极b
>
> 发射区--P型半导体，杂质浓度很高，空穴很多，引出发射极e
>
> 集电区--P型半导体，杂质浓度很低，但面积很大，引出集电极c

### 工作原理

<img src="https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230418130930.webp" style="zoom:50%;" />

1. 发射结加正向电压，扩散运动形成发射极电流Ie

由于发射结加正向电压，又因为发射区的杂质浓度高，自由电子很多，所以大量自由电子因扩散运动越过发射结到达基区，形成发射极电流Ie

2. 扩散到基础的自由电子与空穴复合形成基极电流lb

由于基区很薄，杂质浓度很低，所以扩散到基区的自由电子只有极少部分与空穴符合，形成微弱的基极电流Ib

3. 集电结加反向电压，飘移运动形成集电极电流lc

由于集电结加反向电压且结面积很大，基区的非平衡少子(主要为发射极扩散过来的，未与空穴复合的大量自由电子)在外电场的作用下越过集电结达到集电区，形成漂移电流Ic

- 输出特性曲线

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230418131356.webp)

> 1. 截止区
>
> 发射结电压小于开启电压且集电结反向偏置，即 `Ube<Uon且Uce>Ube`。此时Ib≈0，Ic≈0
> 2. 放大区
>
> 发射结电压大于开启电压且集电结反向偏置，即 `Ube>Uon且Uce>Ube`。此时Ic仅仅取决于Ib, `Ic = β*Ib`
> 3. 饱和区
>
> 发射结电压大于开启电压且集电结正向偏置，即 `Ube>Uon且Uce<Ube`。此时Ic不仅仅与Ib有关，而且随Uce的增大而增大,`Ic ＜ β*Ib`



### 开关应用

> `箭头  外N内P`
>
> `NPN是高电平导通，PNP是低电平导通`

> 实际应用时，晶体管常作开关使用，放大电路使用集成运放。此时，晶体管工作在 `截止区与饱和导通区`

> 三极管完全导通时有一个基本条件：就是be极之间的这个PN结一定要正偏，看箭头即可,至于高多少的话只要压差>0.7V就导通
>
> 三极管处于饱和导通时，CE电压会在 `0.3V` 左右
>
> 电流流向的话，NPN是Ic和Ib两路电流同时流向Ie；PNP是Ie分成两路分别流向Ib和Ic
>
> 不管是NPN还是PNP，三极管首先要导通！，因为负载会分压，本来0.7v就导通了，负载也有电阻，会有分压。如果负载在导通电路，假设负载分压0.3v，现在导通电路1v才能导通！！！所以导通电路不能有负载。它会干扰正常的电压供给。影响控制信号！！( `所以一般PNP是控制VCC端，NPN是控制GND端`)
>
> ![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20231004195045.webp)

> 三极管开关电路的一大优势是可实现小电流控制大电流工作，具体而言是基极电流可以很小（几毫安）便可控制甚至几安培工作电流的负载工作

> 常见的NPN型号：S9013，S8050
>
> 常见的PNP型号：S9012，S8550

> - NPN用于信号开关
>
> ![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20231004190803.webp)
>
> - PNP用于信号开关
>
> <img src="https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230418142834.webp" style="zoom:67%;" />
>
> NPN型三极管典型开关电路和PNP型三极管典型开关电路都用到了两个电阻(非串联LED那个)，两个电阻的作用如下所述：
>
> 1. R58，R52的作用是保护单片机GPIO口和三极管基极
>
> 针对NPN型三极管S8050举例，如果没有电阻 `R52`，当单片机GPIO口输出高电平时，三极管基极和发射极之间有有效的压差使三极管处于导通状态，`一旦三极管饱和导通，基极和发射极间的电压差是0.7V，发射极接地，那基极电压应是0.7V左右`，而单片机GPIO口又输出的是高电平3.3V，那么对无论单片机GPIO口还是三极管基极都会造成不可预知的损坏，故选择在单片机GPIO口和三极管基极之间加一个限流电阻R52
>
> 2. R53，R57的作用是在单片机GPIO口呈高阻态时使晶体管可靠截止，避免出现误动作
>
> 针对NPN型三极管S8050举例，如果没有 `R53`电阻，则单片机GPIO呈高组态时输出的电平是不确定的，那可能会让三极管导通或者截止，三极管截止的话，负载不工作不会有什么后果。而如果三极管导通，控制了负载工作，则会造成不可预知的后果。故加上`R53` 电阻使得三极管基极和发射极电压一致，三极管会在单片机GPIO口呈高阻态时始终处于截止状态。电阻 `R53` 还有一个作用是用于泄漏电流，即使三极管处于截止状态，也不能保证三极管基极就没有电压（尤其集成芯片上断电时），而有了`R53` 电阻可以将漏电流通过`R53` 流入到地(漏极与基极之间的电流可以通过下拉电阻流回地)，保护了三极管和整个电路

> 分析NPN典型开关电路---看上面图1
>
> 假设现在单片机是3.3V单片机，VCC供电是3.3V
>
> 1. 当单片机GPIO口由软件控制输出逻辑“1”，针对硬件电路GPIO口输出的就是高电平3.3V。这个高电平会使三极管基极电压远大于三极管发射极电压0V（对R53取值有要求），从而使三极管工作在饱和导通状态，而一旦三极管进入饱和导通状态，由三极管工作原理及选择的是硅半导体三极管可知 `三极管基极和发射极电压差Ube≈0.7V`，三极管发射极接地故可知三极管基极电压约0.7V。 `R52` 取值会是一个范围，三极管有个重要的参数是 `电流放大系数β`，β除了和所选择的三极管型号有关，还受温度等影响。在此取值 `R52` 为1K，那么可计算出流过`R52`的电流约是2.6mA：
>
>    $\text{经过电阻两端电压是：}3.3V-0.7V=2.6V;\text{流过电阻的电流是：}2.6V\div1000R=2.6mA$
>
>    这个驱动电流是单片机GPIO引脚可以提供的。如果单片机是5V供电的，R1是否选择1K，用户可综合考虑计算取值
>
>    `R53` 的取值至少要满足其与基极限流电阻`R52` 分压后能够满足三极管的临界饱和，实际选择时会大大高于这个最小值，通常外接干扰越小、负载越重允许`R53`的取值就越大，通常采用10K量级的电阻。在此仅分析下`R53`取值过小为什么不行，假设`R53`取值100Ω（`R52`取值按照上面的1K取值），三极管刚开始是截止的，电流全部从`R53`流到地，那么易算出`R53`与`R52`分压后基极端的电压是0.3V：
>
>    $\text{计算总电流：}I=U/R=3.3/(1000+100) = 0.003A；计算R53分压后电压是：U=IR=0.003*100=0.3V$
>
>    这个电压不能够使三极管进入饱和导通状态。另一个因素，即使三极管处于截止状态，`R53`阻值过小都会导致可能产生的漏电流过大，所以综合考虑取值`R53`为10K，当然这个值不是唯一的
>
> 2. 当单片机GPIO口由软件控制输出逻辑“0”，针对硬件电路GPIO口输出的就是低电平0V。这个低电平毫无疑问不会使三极管基极有超过0.7V的电压，那么三极管会处于截止状态。三极管集电极和发射极之间不会有电流流过，负载端无法形成回路，负载不会工作



### 光电三极管与二极管

光电三极管依据 `光照的强度来控制集电极电流的大小`，其功能等效为一只光电二极管与一只晶体管的相连。并引出集电极与发射极，如下图:

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230418144638.webp)

- 光耦运用

参考手册：PC817B

- 光电二极管

光电二极管依据光照的强度来控制PN结，与普通二极管一样，具有单方向导电特性。

参考手册：S8050，S8550，S9014，S9015



### 产品应用

- 驱动有源蜂鸣器

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230418150639.webp)

- 驱动无源蜂鸣器

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230418151023.webp)



## MOS管

### 理论讲解

参考视频：https://www.bilibili.com/video/BV1To4y1p7zb/?spm_id_from=333.337.search-card.all.click&vd_source=5fb3f08926cbdbc6d84b3f2bda38c0b1

`定义`：英文简写FET，利用输入回路的电场效应控制输出回路电流的一种半导体器件。

- 分类

1. 结型场效应管，简称JFET(`不怎么用`)
2. 绝缘栅型场效应管，也称金属氧化物半导体场效应管，简称MOS-FET，也是我们通常所说的MOS管

- MOS管分类

MOS管分为N沟道与P沟道两类，每一类又分为增强型与耗尽型两种，因此MOS管共有四种类型: `N沟道增强型、N沟道耗尽型、P沟道增强型、P沟道耗尽型`

`增强型`：Ugs电压为0时，Ids=0的管子( `常用，就是还没导通时电流是为0的`)

`耗尽型`：Ugs电压为0时，Ids≠0的管子

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230418152731.webp)

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230418153314.webp)

> 首先需要知道：
>
> ①三极管是 `电流控制型`，三极管基极驱动电压只要高于Ube(一般是0.7V)就能导通
>
> ②MOS管是 `电压控制型`，驱动电压必须高于阈值电压Vgs(TH)才能正常导通(具体看型号手册)，不同MOS管的阈值电压是不一样的，一般为3-5V左右，饱和驱动电压可在6-8V
>
> ③MOS管属于场效应管

> 分析：MOS管有3个极-- `S(源极),G(栅极),D(漏极)` 分别对应三极管的 `e(发射极),b(基极),c(集电极)`
>
> ![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20221022114442.jpg)
>
> > 记忆：输入输出的话看寄生二极管，保证它不会导通即可
>
> ![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230418155932.webp)
>
> > NMOS -> `方向D至S，与寄生二极管反向，NMOS管可控`
> > 			     `方向S至D，与寄生二极管同向，NMOS管不能关闭`
> > PMOS ->  `方向S至D，与寄生二极管反向，PMOS管可控`
> > 			      `方向D至S，与寄生二极管同向，PMOS管不能关闭`
>
> MOS管的导通条件：
>
> N沟道：导通时 `Vg> Vs`,  `Vgs> Vgs(th)` 时导通
>
> P沟道：导通时 `Vg< Vs` , `Vgs< Vgs(th)` 时导通
>
> MOS管导通条件： `|Vgs| > |Vgs(th)|`
>
> > Vth是阈值电压，即可以导通的最小电压，对于 n-MOS 来说，Vth 是负数，一般在-0.3V 至 -1.5V 之间；而对于 p-MOS 来说，Vth 是正数，一般在0.5V 至 1.5V 之间
> >
> > Vgs就是电位差，即Vg - Vs 的电压
>
> `PMOS栅极低电平导通，NMOS栅极高电平导通`
>
> `NMOS电流方向是D--->S；PMOS电流方向是S--->D`
>
> 分辨：
>
> ① S极有两根线相交，D极只有一根线
>
> ② 箭头指向G极(向内)--- NMOS	箭头背向G极(向外)---PMOS	(<span style="color:red;"> 跟三极管相反</span>)
>
> ③ 箭头的方向代表了电子的运动方向， `电流方向与之相反`
>
> ④ NMOS一般 `S极接地`；PMOS一般 `S极接VDD`
>
> MOS管本身自带有 `寄生二极管`，作用是防止VDD过压的情况下，烧坏MOS管，因为在过压对MOS管造成破坏之前，二极管先反向击穿，将大电流直接到地，从而避免MOS管被烧坏





### 增强型NMOS

实际应用时，NMOS管常作低端驱动与开关使用，此时，MOS管工作在夹断区与可变电阻区。

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230418154345.webp)

### 增强型PMOS

实际应用时，PMOS管常作高端驱动与开关使用，此时，PMOS管工作在夹断区与可变电阻区。

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230418154503.webp)



### 寄生参数

1. 寄生电容

如下图，由于源极S与衬底B相连，源极S、栅极G、绝缘膜刚好组成寄生电容Cgs，此电容大小为pF级别，一般规格书可以查到。

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230418162349.webp)

使用时，要特别注意GS管脚的寄生电容Cgs，控制MOS管的导通与截止，本质上是控制Cgs电容的充放电;

如果要求MOS管快速导通与截止，此时需要驱动源能够提供足够大的驱动电流，以提供Cgs电容的瞬间充放电;

如果仅仅作为开关使用，可以串电阻，以减小Cgs的充放电电流，此时，对驱动源的要求就不高，单片机的IO口(推挽输出时，可以提供20mA的驱动电流)可以直接驱动。

2. 寄生二极管

如下图，为NMOS管的构造，衬底B与源极S、漏极D均存在PN结，由于源极S与衬底B相连，左边的二极管无效，源极S与漏极D存在寄生二极管，方向为S指向D。

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230418162558.webp)

使用时，要特别注意内部寄生二极管，如果接反，将导致无法关闭MOS管;另外，某些场合可以巧用寄生二极管，比如做防反接使用时。



### 应用

- NMOS管用于低端开关

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230418172433.webp)

1. R14起到限流作用，单片机输出高电平时，通过R14给Cgs电容充电，U7导通;单片机输出低电平时，Cgs电容通过R14放电，U7截止
2. 由于单片机输出电压没有超过Vgs的运行电压，GS端不需要并电阻到地

- PMOS管用于防反接保护

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230418173726.webp)

1. 巧妙利用内部寄生二极管。上电时，通过内部寄生二极管， `|Vgs|` 电压大于 `|Vth|` 电压，PMOS管完全导通
2. R29，R31:电阻分压，调整 `|Vgs|` 电压， `|Vgs|` 电压尽量大，这样，Ron越小，压降越小，损耗越低
3. D5、稳压二极管，防止 `|Vgs|` 电压超过极限电压



### 选型

- MOS管类型

一般选择增强型NMOS管，同等工艺条件下，导通电阻Ron更小，发热更低，允许通过的电流更大，型号也更多

- $V_{GS}$电压

需要考虑开启电压$V_{th}$，驱动电压，极限电压

- Id电流

通常，尺寸越大，导通电阻Ron越小，允许的Id越大，具体手册为准

- $V_{DS}$电压

主要考虑$V_{DS}$极限电压，防止击穿MOS管

- 开关性能

如果作为开关使用，需要考虑开关速率，开关性能，主要受寄生电容的影响，因为开关过程中需要对寄生电容充放电，产生开关损耗

- 品牌，封装尺寸，价格等

参考手册：AOD4184A(NMOS)，AOD4185(PMOS)，AO3400A(NMOS)，AO3401A(PMOS)

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230418175235.webp)

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230517092937.webp)



### MOS管与三极管差异

场效应管的 `栅极g，源极s，漏极d` 对应于晶体管的 `基极b，发射极e、集电极c`，作用比较类似，都可以作为开关、放大使用，但结构，工作方式，性能差异较大。

1. 场效应管只有多子参与导电，为单极性;而晶体管的多子与少子均参与导电，为双极性;
2. 因为少子数目受温度、辐射影响较大，因而场效应管比晶体管的温度稳定性好、抗辐射能力强。
3. 场效应管用Ugs控制漏极电流ld，输入阻抗达10“Q，栅极电流几乎为0;而晶体管工作时基极需要一定的电流。因此，要求输入阻抗高的电路应选用场效应管。
4. 场效应管的电流方向可以为D到S，也可以S到D，而晶体管的电流方向只能为C到E(NPN)或E到C(PNP)，不能同时两个方向。

> 设计电路当开关需要注意： `简单的就是：负载接在没有箭头的那端！`也就是集电极是PNP的正极，它要接负载，是NPN的负极，它要接负载

## 集成运放

### 理论讲解

`集成电路`：集成电路是采用专门的制造工艺，在半导体单晶硅上，把晶体管、场效应管、二极管、电阻和电容等元器件及它们之间的连线所组成的电路制作在一起，使之具有特定功能的芯片。(相当于模块化)

`集成运放`：集成运放，全称集成运算放大器，是具有超高放大倍数(可达$10^5$甚至$10^6$)的集成电路。常用于各种模拟信号的运算(如比例、求和、求差、积分、微分等)。

`集成运放构成`：如下图，集成运放由输入级、中间级、输出极和偏置电路等四部分构成。

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230418184904.webp)

① `输入级`
输入级又称前置极，通常是一个双端输入的高性能差分放大电路。一般要求输入阻抗高，差模放大倍数大，抑制共模信号能力强，静态电流小，对整个集成运放的性能参数至关重要。
② `中间级`
中间级是集成运放的主放大器，其作用是使集成运放具有较强的放大能力，多采用共射(或共源)放大电路，其电压放大倍数可达几千倍。
③ `输出级`
输出级具有输出电压线性范围宽、输出阻抗小(即带载能力强)、非线性失真小等特点，通常采用互补输出电路。
④ `偏置电路`
偏置电路用于设置集成运放各级放大电路的静态工作点。

- 符号

Vs+一般接5V，Vs-一般接-5V或者地

`V+ > V-；Vout = 5V`

`V+ < V-；Vout = 0V`

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230418185851.webp)

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230418185859.webp)

`集成运放特点`：开环差模放大倍数(增益)超级大，差模输入电阻超级大，输出电阻超级小

- 集成运放用途

①加减乘除

②积分/微分

③电压跟随器

④电压比较器

⑤同向/反向放大器

⑥差分放大器

⑦I/V转换

⑧精密电流源

⑨波形发生器

...

- 集成运放常用封装

双路运放：SOP8，DIP8

它里面集成有两组运放

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230418190435.webp)



### 工作原理

- 电压传输特性

集成运放的输出电压Uo与输入电压(同相输入端与反相输入端的电位差)(Up - Un)之间的关系曲线称为电压传输特性，即:

$Uo = f(Up - Un)$

对于正、负两路供电的集成运放，曲线如下图(1,3象限分别是正电压负电压):

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230418190914.webp)

曲线分析:

`线性区`: `Uo = Aod*(Up - Un)`,其中Aod为差模开环放大倍数，非常高，可达几十万倍，因此，集成运放的线性区非常窄。

`非线性区`: 输出电压要么Uom，要么-Uom，达到饱和，一般用于比较器。

> 如果要做运算一般工作在线性区，如果是比较器就非线性区

- "虚短"与"虚断" --- 线性区

1. 虚短

对于理想运放，当工作在线性区时， `Uo = Aod*(Up - Un)`，Aod无穷大，得出:

$Up - Un = \frac{Uo}{Aod} = 0$，得出 `Up = Un`，即输入端"虚短"(两个输入端好像是短接一起)

2. 虚断

对于理想运放，输入电压Ri无穷大，Up-Un = 0,得出:

$Ip = In = \frac{(Up-Un)}{Ri} = 0$，即输入端"虚断"(两个输入端好像是断开一样)

> 利用"虚短"与"虚断"，可以计算出集成运算电路输出电压与输入电压的公式

- 负反馈

从集成运放的电压传输特性可知，开环应用时，由于放大倍数Aod超级大，导致线性区非常窄，没法应用到运算电路中，比如: Aod = 1000000，供电电压正负10V，只有当|Up-Un| <10uV时，电路才工作在线性区，而输入电压纹波，温度影响等都会超过10uV，电路没法使用。
为了解决这一问题，引入了负反馈，将 `输出电路的一部分或全部通过一定的电路形式返回到输入端，达到改善电路性能，稳定放大倍数的目的`。

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230506141242.webp)





- 电压跟随器

常用于ADC采集电路，ADC引脚一般不直接接输入端，中间一般加一个负反馈电路进行采集

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230506141407.webp)

- 同向/反向比例运算电路

差分输入的话 `R'` 电阻一般跟上面一样的保持平衡，放大倍数就是 `1+Rf/R`

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230506142917.webp)

反向的话，`Ui` 就接到负极那了，正极就接一个平衡电阻然后接地，通过计算可以知道最后是 `-Rf/R`，Ui是负压那Uo是正压，Ui是正压那Uo是负压

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230506144901.webp)

- 反向求和运算电路

反相求和运算电路的多个输入信号均作用于集成运放的反相输入端，同相的话就是反过来输入端Ui接正极，负极接电阻接地

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230506150352.webp)

- 差分运算电路

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230506150855.webp)

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230506152008.webp)

- I/V转换电路

就是通过输入一个范围的电流转换为电压，然后输出放大的电压



### 产品应用

- 检测负载电流

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230506153859.webp)

- PWM输出0-10V

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230506154452.webp)



## 驱动电路

`定义`：驱动电路位于控制电路与负载电路之间，将控制电路的控制信号转化为负载电路所需的驱动信号，提供足够的电压，电流或功率驱动负载电路。

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230506155458.webp)

`控制电路`: 各类单片机，处理器等。

`驱动电路`: 晶体管与MOS管构成的放大电路，开关电路;驱动IC

`负载电路`: 电机、继电器、LED灯、音频设备等



- 低端驱动

负载一端接电源，一端接开关管，开关管控制负载的电势低端，所以称为低端驱动，一般使用 `NPN晶体管，NMOS管`等。

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230506155700.webp)

- 高端驱动

负载一端接地，一端接开关管，开关管控制负载的电势高端，所以称为高端驱动，一般使用 `PNP晶体管，PMOS管`等。

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230506155820.webp)

### OC门与OD门

集电极开路和漏极开路是指晶体管工作时发生的两种常见故障现象，OC门和OD门则是针对这两种故障现象而言的，当集电极开路时，PNP型晶体管和NPN型晶体管都无法工作，因为 `电流无法流过集电极` ；此时称为OC（Open Circuit）门。当漏极开路时，NMOS管和PMOS管都处于截止状态，因为 `电流无法流回电源`，此时称为OD（Open Drain）门。

- OC门

集电极开路，即为OC门，开路也就是输出高阻态，三极管截止时电平不确定

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230506160424.webp)

- OD门

漏极开路，即为OD门

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230506160432.webp)

- 应用说明

① 可以输出低电平，如果需要输出高电平，需要外接上拉电阻(上拉电阻可以接5V或者12V等等这样输入电压是3.3V的话就可以转换不同电压输出)
② OC门或OD门可以接在一起，再接个上拉电阻，可以构成"线与逻辑"。比如IIC总线，只要一路输出低电平，总线均为低电平;都输
出高电平，总线才为高电平。

> 所以一般的模拟I2C的话，只需要把引脚设置为开漏输出即可，无需设置为推挽输出然后切换为输入模式这样来回切换，但是需要特别注意管脚是否接有外部上拉电阻，否则可能会导致输出状态不符合预期

- 阅读手册

`ULN2003A`(达林顿)

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230506163541.webp)



### 推挽

推挽采用 `互补输出`，上下管 `只有一路处于导通状态`，即具有低电平驱动能力，又具有高电平驱动能力。

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230506164152.webp)

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230506164636.webp)

> 1. PWM为高电平，Q4导通，Q3截止，U8的寄生电容Cgs通过Q2与R6放电，U8关闭;
> 2. PWM为低电平，Q4截止，Q2截止，12V电压通过Q3给U8的寄生电容Cgs充电，U8导通;
> 3. R3为限流电阻，避免Cgs的充放电电流过大;
> 4. R6的作用: Cgs放电时，通过Q2与放电，只能放到0.7V左右，加上R6，就可以放到0V，确保关闭MOS;
> 5. 此电路可以用于有刷直流电机的PWM调速;



### 半桥

跟推挽有点像，但是这个是可以单独控制两个管的，推挽是一起控制的

`定义`：半桥由上下管构成，可以单独控制上下管的道导通与截至，具有高低电压驱动能力，应用时需要避免上下管同时导通造成短路。

> 平时我们说的 `死区` 就是两个管同时导通的情况，所以要避免死区

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230506171257.webp)

- 应用

① 应用于半桥式开关电源;

② 两个半桥可以组成全桥驱动;

③ 三个半桥可以驱动无刷电机。

- 手册

`IR2104STRPBF - 半桥驱动`

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230506172223.webp)



### 全桥

`定义`：全桥由四个管子构成，通过控制上下管可以改变输出的电流流向，比如控制直流电机的正反转。

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230506175750.webp)

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230506175546.webp)

- 应用

① 应用于全桥式开关电源;

② 驱动负载，控制电流流向;

比如下面的图把 `Q2和Q3` 两个管子关闭，`Q1和Q4`导通那它的方向就是正转

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230506172820.webp)

比如下面的图把 `Q1和Q4` 两个管子关闭，`Q2和Q3`导通那它的方向就是反转

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230506172835.webp)

- 手册

`LV8548MC-AH`

它可以控制两个直流电机，也可以控制一个双极性的电机，手册主要看逻辑部分：

> Stand-by表示就绪，Forward表示正转，Reverse表示反转，这跟电机接线有关系

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230506174502.webp)

当IN1输入1，IN2输入0时，OUT1输出1，OUT2输出2，然后左上角和右下角的管导通(看寄生二极管是否导通就行了，管子导通时二极管是不导通的)



### 产品应用

-  单片机GPIO口驱动LED

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230507094044.webp)

- 全桥IC驱动直流有刷电机

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230507094159.webp)

- 晶体管驱动LED，继电器

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230507094302.webp)

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230507094520.webp)

- OC门驱动步进电机

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230507094416.webp)

- 全桥电路驱动大功率有刷直流电机

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230507094657.webp)



## 电源基础

- 常规电源

1. AC to DC

将110V或220V市电转换为3.3V,5V,12V,24V等，通常使用电源模块

2. LDO线性电源

低噪声，通常给单片机，模拟IC等器件供电

3. BUCK降压开关电源

通常作为产品内部主电源，将外部输入的直流12V或其他电压降为5V，3.3V等电压，供内部器件使用

4. BOOST升压开关电源

通常将电池等低压升到5V，12V等，供外设使用



### TL431三端稳压管

TL431是高性价比的分流式电压基准，特性如下：

① 高精度电压基准输出。分3个等级，0.5%(B极)，1%(A极)，2%(标准)

② 可调电压输出支持Vref至36V
③ 内部允许1-100mA电流

④ 动态输出电阻低至0.2Q

⑤ 低噪声，低温漂

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230507102308.webp)

- 常用型号

TL431 ,TL431A,TL431BTL432 , TL432A, TL432B

`封装`: TO-92，SOT-23，SOT-89,SOIC，TSSOP

> TL431与TL432功能一样，但管脚排列不同，需要注意

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230507102538.webp)

- 手册

`TL431AIDBZR`

最小的阴极电流是 `1mA`，小于它可能就不会稳定工作了

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230507102800.webp)

- 2.5V电压基准电路

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230507102953.webp)



### LDO

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230507104730.webp)

- 工作原理

① 由拓扑可知，内部误差放大器通过控制开关管的导通程度实现稳压，输出纹波小，无开关噪声

② LDO属于线性电源，输出电流等于输入电流， `发热功率=电压差*电流，转换效率=Vo/Vi`

③ LDO不适合电压差过大的场合，比如输入24V，输出3.3V，如果电流20mA， `发热功率=20.7V*20mA=0.54W`，效率只有13.75%

> 如果负载电流很小，压差过大也可以使用LDO

④ LDO不适合电流大的场合，电流大，发热功率相对较大，同时，压差大，可能导致电压下拉，具体看datasheet的电压降，比如1V/1A(电流1A时，压降最少1V，此时，如果输入电压4V，输出最大只能3V)

⑤ 根据经验， `SOT-23封装，发热功率不超过0.3W; SOT-89,发热功率不超过0.5W`

⑥ 如果发热功率过大，可以考虑使用BUCK降压电路，必须使用LDO的话，可以串联电阻，分担一部分功耗，但需要注意LDO电压降必须满足要求

- 选型依据

① 输入输出电压–决定了最大电压差

② 输出电流–评估带载能力，电压差等

③ 静态电流–低功耗考虑

④ 品牌，成本

⑤ 封装，发热功率(电压差*输出电流)

- 常用型号

7805，AMS1117系列，HT73xx系列等

- 手册

`LDO-HT7333-3`



### BUCK降压

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230507110228.webp)

`工作原理`：开关S将输入电压Vin斩波成PWM波，再通过LC滤波器输出直流电压Vout，调整PWM波的占空比，即可得到不同的输出电压。`Vout = Vin * D`

环路一，开关闭合时的电流路径; 环路二，开关断开时的电流路径。闭合环路，变化的电流产生磁场，为了降低EMC，设计PCB时，环路设计应该尽量小，同时，不要干扰了模拟电路，比如反馈回路、增益补偿、软启动、使能电路等。

为了降低功耗，提高降压效率，功率电感应该选取低DCR的，饱和电流为平均电流的4/3(经验值);续流二极管D选取肖特基二极管，或选择同步降压IC(集成了续流二极管)

为了降低输出纹波，电感、电容需要选择合适的值，一般datasheet有推荐，电感值越大，相对纹波越小，但是，由于电感阻碍电流变化，导致响应负载的速度变慢;电容一般选用铝电解电容与陶瓷电容(低ESR)的组合;高度有限制或对成本不敏感时，可以选择钮电容，钮电容温度特性好，低ESR，寿命长，但成本高，耐压差(耐压最好选择大于2倍的输出电压)

- 选型依据

① 输入输出电压–决定了PWM波的占空比

② 输出电流–评估带载能力

③ 品牌，封装，成本

- 常用型号

MPS品牌 MP2451 MP1584等

TI品牌 TPS54331等

其他品牌

- 手册

`MP2451DT-LF-Z`



### BOOST升压

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230507124739.webp)

`原理`: 开关S闭合时，电感蓄能，开关S断开时，电感电流不能突变，产生自感电压，此电压与输入电压叠加，将产生高于输入电压的PWM波，再通过电容C滤波成直流电压，达到升压的目的。`vout = (Vin+电感自感电压)*D`

环路一，开关闭合时的电流路径，此时电源给电感充电，负载由电容供电;环路二，开关断开时的电流路径，电源与电感同时给电容充电，给负载供电，起到升压效果;

闭合环路，变化的电流产生磁场，为了降低EMC，设计PCB时，环路设计应该尽量小，同时，不要干扰了模拟电路，比如反馈回路、增益补偿、使能部分等;

为了降低功耗，功率电感应该选取低DCR的;整流二极管D选取肖特基二极管;

为了降低输出纹波，电感值、电容值需要选择合适的值，一般datasheet有推荐。电感值过小，存储能量不足，导致电压升不上去，电感值过大，导致负载响应速度变慢，因此，电感需要选择合适的值;电容值过大，导致开机时充电电流过大，容易导致电感饱和或电源无法启动，电容值过小，导致纹波过大，因为开关闭合时，负载完全由电容供电，因此，电容需要选择合适的值

- 选型依据

① 输入输出电压

② 输出电流–评估带载能力

③ 品牌，封装，成本

- 常用型号

MPS品牌 MP1541等

微盟 ME2159等

其他品牌

- 手册

`ME2159AM6G`



### 产品应用

- LDO-经典78L05

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230507132548.webp)

`特点`：低成本，压差至少2V，带载能力100mA 



- LDO-HT7333-3

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230507132951.webp)

`特点`：低压差，低静态电流，带载能力250mA

- LDO-MIC29302

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230507131630.webp)

`特点`：压差小于0.6V,带载能力3A

- BUCK降压-MP2451

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230507131830.webp)

`特点`：开关频率2M，带载能力0.6A

- BUCK降压-TPS54331

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230507131957.webp)

`特点`：开关频率570KHz，带载能力3A

- BOOST升压-ME2159

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230507132211.webp)

`特点`：开关频率650KHz，内部集成2A MOS功率管



## 常用器件

### 光耦

光耦合器亦称光电隔离器或光电耦合器，简称光耦。

光耦一般由三部分组成: `光的发射`、 `光的接收` 及 `信号放大`。输入的电信号驱动发光二极管(LED)，使之发出一定波长的光，被光探测器接收而产生光电流，再经过进一步放大后输出。这就完成了 `电-光-电` 的转换，从而起到 `输入、输出、隔离` 的作用。

由于光耦以光为媒介传输电信号，输入输出间互相隔离，电信号传输具有单向性等特点因而 `具有良好的电绝缘能力和抗干扰能力`，在
数字电路上获得广泛的应用，目前它已成为种类最多、用途最广的光电器件之一。

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230507151755.webp)

- 分类

光耦分为两种: 一种为 `非线性光耦`，另一种为 `线性光耦`。

非线性光耦的电流传输特性曲线是非线性的，这类光耦适合于 `开关信号的传输`，不适合于传输模拟量。常用的 `4N` 系列光耦属于非线性光耦。

线性光耦的电流传输特性曲线接近直线，并且小信号时性能较好，能以线性特性进行隔离控制。常用的线性光耦是 `PC817A-C` 系列。

- 光耦参数

{% note blue 'fas fa-fan' flat %}输入参数{% endnote %}

`正向工作电压Vf`: Vf是指在给定的工作电流下，LED本身的压降

`反向电压Vr`: 是指LED所能承受的最大反向电压，超过此反向电压，可能会损坏LED。

`允许功耗Pd`: LED所能承受的最大功耗值。超过此功耗，可能会损坏LED

`正向工作电流If`: If是指LED正常发光时所流过的正向电流值

{% note blue 'fas fa-fan' flat %}输出参数{% endnote %}

`集电极电流I`: 光敏三极管集电极所流过的电流，通常表示其最大值

`集电极-发射极电压Vceo`: 集电极-发射极所能承受的电压

{% note blue 'fas fa-fan' flat %}其他参数{% endnote %}

`电流传输比CTR`: 电流传输比是光耦合器的重要参数，指光敏三极管和发光管的电流比最小值。稳定工作: 

`Ic/If ≥ CTR =>If*CTR ≥ Ic`

`隔离电压`: 输入和输出端之间的隔离电压，一般可超过1kV，有的甚至可以达到10kV以上

- 应用电路

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230507173344.webp)

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230507173357.webp)

`说明`：用于RS-485信号隔离

- 手册

`PC817B`



### 蜂鸣器

- 按组成结构，分 `压电式` 和 `电磁式`
- 按工作方式，分 `有源` 和 `无源`

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230507194847.webp)

 `压电式蜂鸣器`：需要比较高的电压才能有足够的音压,一般建议为9V以上压电的有些规格，可以达到120dB以上，较大尺寸的也很容易达到100dB

 `电磁式蜂鸣器`：用1.5V就可以发出85dB以上的音压了电磁式蜂鸣器的音压━般最多到90dB相同的尺寸时，电磁式的蜂鸣器，响应频率可以做的比较低;

> 注意: 这里的"源"不是指电源，而是指震荡源。也就是说，有源蜂鸣器内部带震荡源，所以只要一通电就会叫;而无源内部不带震荡源,所以如果用直流信号无法令其鸣叫。必须用2K-5K的方波去驱动它。

`有源`：驱动简单，程序控制方便

`无源`：便宜，声音频率可控，可以做出音乐效果

> 有源分正负极，不能接反；无源不分

- 应用

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230507195243.webp)

`说明`：高低电平驱动，上图是NPN，高电平导通

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230507195300.webp)

`说明`：PWM方波驱动



### 继电器

`定义`：继电器(Relay)是一种电子控制器件，它具有控制系统〈又称输入回路）和被控制系统（又称输出回路)，通常应用于自动控制电路中,它实际上是用较小的电流去控制较大电流的一种“自动开关”。

> 因为继电器是由线圈和触点组两部分组成的，所以继电器在电路图中的图形符号也包括两部分: `一个长方框表示线圈(连接输入电压的不分正负);一组触点符号表示触点组合。`
>
> ![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230507200807.webp)
>
> 还有就是通上电后如果听不到吸合的声音那大概就是线圈烧坏了，这个是维修不了的，如果听到有吸合声音那还可以修直接拆开即可

- 分类

分为 `电磁继电器` 和 `固态继电器`

`电磁继电器`：基本原理:利用电磁效应来控制机械触点达到通断目的，给带有铁芯线圈通电-线圈电流产生磁场-磁场吸附衔铁动作通断触点，整个过程是 `"小电流-磁-机械-大电流"` 这样一个过程;

优点: 价格便宜，驱动简单，隔离效果好

缺点: 体积大，寿命相对短(机械触点)

`固态继电器`：基本原理:由微电子电路，分立电子器件，电力电子功率器件组成的无触点开关。用隔离器件实现了控制端与负载端的隔离。固态继电器的输入端用微小的控制信号，达到直接驱动大电流负载。

优点: 寿命长(无触点)，驱动简单，隔离效果好

缺点: 体积大，成本高

- 名词解释

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230507201153.webp)

`常开端`: 线圈不通电时两触点是断开的，通电后，两个触点就闭合。以合字的拼音字头"H"表示

`常闭端`: 线圈不通电时两触点是闭合的，通电后两个触点就断开。用断字的拼音字头"D"表示

`公共端`: 开关输入，比如接12V，24V，220V等

- 继电器参数

`额定工作电压`: 是指继电器正常工作时线圈所需要的电压。根据继电器的型号不同，可以是交流电压，也可以是直流电压

`直流电阻`: 

电磁继电器:继电器中线圈的直流电阻，可以通过万能表测量

固态继电器:输入回路的阻抗

`吸合电流`: 是指继电器能够产生吸合动作的最小电流。在正常使用时，给定的电流必须略大于吸合电流，这样继电器才能稳定地工作。而对于线圈所加的工作电压，一般不要超过额定工作电压的1.5倍，否则会产生较大的电流而把线圈烧毁。

`释放电流`: 是指继电器产生释放动作的最大电流。当继电器吸合状态的电流减小到一定程度时，继电器就会恢复到未通电的释放状态。这时的电流远远小于吸合电流

`触点切换电压和电流`: 是指继电器允许加载的电压和电流。它决定了继电器能控制电压和电流的大小，使用时不能超过此值，否则很容易损坏继电器的触点

`触点寿命`: 由于固态继电器无触点，这个主要针对电磁继电器，指触电弹片的切换次数，理论一般可达百万次

- 手册

`JZC-33F-012-ZS3`

- 应用

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230507201915.webp)

> 上图是驱动电磁继电器，由于线圈是感性负载，需要续流二极管D7，如果驱动的固态继电器，可以去掉续流二极管,D6是指示灯作用











### 可控硅

可控硅，是可控硅整流元件的简称，是一种具有 `三个PN结的四层结构` 的大功率半导体器件，亦称为 `晶闸管`。具有体积小、结构相对简单、功能强等特点，是比较常用的半导体器件之一。该器件被广泛应用于各种电子设备和电子产品中，多用来作 `可控整流、逆变、变频、调压、无触点开关`等。家用电器中的调光灯、调速风扇、空调机、电视机、电冰箱、洗衣机、照相机、组合音响、声光电路、定时控制器、玩具装置、无线电遥控、摄像机及工业控制等都大量使用了可控硅器件。

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230507202934.webp)

- 工作原理

{% gallery %}
![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230507203033.webp)

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230507203052.webp)

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230507203252.webp)

{% endgallery %}

- 结论

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230507203305.webp)

- 主要参数

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230507203316.webp)

- 手册

`可控硅输出光耦-CYMOC3020`

- 文档

`过零点触发双硅输出光耦MOC3061经典应用`



## 保护电路

### 反接保护

如下图，正常供电时，J8的管脚1接电源VCC，管脚2、3接地线GND。如果J8的管脚1接电源GND，管脚2、3接电源VCV(反接了)

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230517084016.webp)

- 保护电路

1. 对于负载不大，比如输入电流小于1A的场合，可以使用肖特基二极管
2. 对于负载较大，比如输入电流大于1A的场合，考虑功耗、压降等问题，使用PMOS管或NMOS管

- 电路

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230517085201.webp)

设计说明:

1. 巧妙利用内部寄生二极管。上电时，通过内部寄生二极管， `|Vgs| > |Vth|` 电压，PMOS管完全导通;
2. R29，R31:电阻分压，调整 |Vgs| 电压，|Vgs| 电压尽量大，这样，Ron越小，压降越小，损耗越低;
3. D5稳压二极管，防止 |Vgs| 电压超过极限电压。

> 正常接的话，假设输入12V，经过mos管时由于截止，所以从续流二极管那通过，压降后 ，S极电压大概是 11.7V左右，然后通过电阻分压，G极电压大概5.6左右，满足 `Vs > Vg`，`Vgs算出来是负数，mos的开启电压Vth大概1.6左右，所以也满足 |Vgs| > |Vth|，Vgs < Vth`

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230517094417.webp)

设计说明:

1. 巧妙利用内部寄生二极管。上电时，通过内部寄生二极管， `Vgs电压 > Vth`电压，NMOS管完全导通;
2. R87，R88:电阻分压，调整Vgs电压，Vgs电压尽量大，这样，Ron越小，压降越小，损耗越低;
3. D25，稳压二极管，防止Vgs电压超过极限电压。



## EMC

`定义`：EMC-电磁兼容性，是指设备在其电磁环境中符合要求运行并且不对其环境中的任何设备产生无法忍受的电磁干扰的能力。

EMC包括两个方面的要求:

① 设备在正常运行过程中对所在环境产生的电磁干扰不能超过一定的限值

② 设备对所在环境中存在的电磁干扰具有一定程度的抗扰度

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230517101923.webp)

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230517101941.webp)

> 所以说最好在一开始就考虑EMC问题，不然越到后面成本越高

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230517103039.webp)

1. 电磁骚扰源: 任何形式的自然或电能装置所发射的电磁能量，能使共享同一环境的人或其它生物受到伤害，或使其它设备、分系统或系统发生电磁危害，导致性能降低或失效，即称为电磁骚扰源。
2. 耦合途径: 即传输电磁骚扰的通路或媒介。
3. 敏感设备: 是指当受到电磁骚扰源所发射的电磁量的作用时，会受到伤害的人或其它生物，以及会发生电磁危害，导致性能降低或失效的器件、设备、分系统或系统。许多器件、设备、分系统或系统可以既是电磁骚扰源又是敏感设备。电磁骚扰源产生的电磁骚扰,通过耦合途径,传输给敏感设备,即造成电磁骚扰

- 常用认证

`CCC认证`：中国强制认证

`CE认证`：欧盟强制认证

`FCC`：美国强制认证

- 各类信号频谱

`时域`: 电压信号随时间变化曲线图，代表仪器为示波器

`频域`: 谐波幅度随频率变化曲线图，代表仪器为频谱仪

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230517103607.webp)

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230517103614.webp)

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230517103629.webp)



### 磁珠与磁环

{% note blue 'fas fa-fan' flat %}磁珠{% endnote %}

磁珠对高频信号具有较高的阻碍作用，专用于抑制信号线、电源线上的高频噪声和尖峰干扰，还具有吸收静电脉冲的能力。

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230517104949.webp)

- 选型

主要考虑4个参数: `阻抗，DCR，电流，封装`

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230517105118.webp)

1. 阻抗

下图是磁珠120R/100MHz的曲线图，意味，频率100M的信号通过磁珠时，磁珠的阻抗为120Q。

不同的信号经过磁珠时，表现的阻抗不同，选型时，通过示波器测量干扰频率，再选择此干扰频率下，阻抗较高的磁珠。

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230517105317.webp)

2. DCR 重要参数，特别是磁珠用于电源线时。DCR会导致电源线上的压降比如3.3V电源，如果电流1A，DCR超过0.3Ω时，压降会超过0.3V，导致电压低于3V，导致IC工作异常。通常来说，阻抗越小，封装越大，DCR越小。
3. 电流 流过磁珠的最大电流，用在电源线上时需要特别注意，防止过热烧毁。
4. 封装 封装影响上面的3个参数，同时影响占用pcb的面积。

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230517105602.webp)



{% note blue 'fas fa-fan' flat %}磁环{% endnote %}

磁环，又称铁氧体磁环。它是电子电路中常用的抗干扰元件，对于高频噪声有很好的抑制作用，一般使用铁氧体材料(Mn-Zn)制成。

磁环在不同的频率下有不同的阻抗特性，一般在低频时阻抗很小，当信号频率升高磁环表现的阻抗急剧升高。

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230517105751.webp)

- 选型

主要考虑2个参数: `阻抗，尺寸`

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230517105858.webp)

1. 阻抗 不同的信号经过磁环时，表现的阻抗不同，选型时，通过示波器测量干扰频率，再选择此干扰频率下，阻抗较高的磁环。

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230517110215.webp)

1. 尺寸 磁环通过用于导线，选用的尺寸，确保导线可以穿过，此外，尺寸也符合符合结构要求。

- 应用

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230517110053.webp)

### EMC原理图

- 数字IC电源管脚放置滤波电容，考虑开关速度与谐振频率，典型值0.1uF

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230517111021.webp)

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230517111032.webp)

- 晶体电路串电阻

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230517111238.webp)

- 高速信号线增加RC

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230517111701.webp)

- 接口电路

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230517111711.webp)

- 设计考虑

高频滤波电容紧靠IC，环路最小

- EMC优化措施

1. 干扰源

① 对于BUCKBOOST等功率环路引起的干扰，PCB设计时尽量减小环路，另外，可以选择开关频率较低的IC，比如MP2451的开关频率2M，而MP1584可以设置为100k，频率低，EMC会好些。

② 满足要求的情况下，尽量降低系统时钟频率，也可以充分利用时钟电路的倍频器。比如系统时钟72M，采用8Mx9倍频或4M*18倍频。

2. 耦合路径

对于高速电路，可以使用屏蔽罩，阻断路径；对于导线，可以使用磁环。

3. 设备

尽量远离干扰源



## 门电路

### 与门

全部输入为1，输出才是1，一个输入为0则输出0

实现方法：

1. 晶体管实现

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230517140454.webp)

2. CMOS管实现

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230517140543.webp)

与门由两级电路构成，且用的器件较多，即影响速度又降低集成度，所以用与非门多。

- 集成电路

`74LS21`

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230517140723.webp)



### 或门

一个输入为1，输出是1，全部输入为0才是0

实现方法：

1. 晶体管实现

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230517141546.webp)

2. CMOS管实现

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230517141601.webp)

- 集成电路

`74IS32`

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230517141814.webp)



### 非门

输入0输出1，输入1输出0



### D触发器

`触发器`：触发器是时序逻辑电路的基本单元，用来存储1位二进制信息，具有记忆和存储功能，其信息由双稳态电路来保存。触发器的种类很多，有 `D触发器`，`J-K触发器`，`T触发器`等。

D触发器是一种最简单的触发器，在 `触发边沿` 到来时，将输入端的值存入其中，并且这个值与当前存储的值无关。在两个有效的脉冲边沿之间，D的跳转不会影响触发器存储的值，但是在脉冲边沿到来之前，输入端D必须有足够的建立时间，保证信号稳定。

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230517143256.webp)

> 一开始CLK在等待上升沿到来，所以一开始CLK是0，上升沿一到，与门成立，输出1(尽管有一个反相器但是传输需要时间的)

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230517145626.webp)



## 电平规范

- 名词解释

`Voh-->输出高电平；Vol-->输出低电平`

`Vih-->输入高电平；Vil-->输入低电平`

- TTL电平

TTL集成电路主要由BJT晶体管逻辑门构成，如74LS系列IC，电平规范如下：

输出模式：`Voh >= 2.4V`,`Vol <= 0.4V`

输入模式：`Vih >= 2.0V`,`Vil <= 0.8V`

- CMOS电平(抗干扰能力强)

CMOS集成电路主要由MOS管逻辑门构成，如74HC系列IC，电平规范如下：

输出模式：`Voh ≈ VCC`,`Vol ≈ GND`

输入模式：`Vih >= 0.7V*VCC`,`Vil <= 0.2V*VCC`



### 数字接口匹配

1. `3.3V/5V TTL 驱动3.3V CMOS`

可以直接驱动

2. `3.3V/5V TTL 驱动5V CMOS`

高电平输出大于2.4V，如果落在2.4V至3.5V之间，CMOS电路不能检测到高电平，需要进行电平转换

3. `3.3V/5V CMOS 驱动3.3V/5V TTL`

可以直接驱动

4. `3.3V CMOS 驱动5V CMOS`

高电平输出3.3v, CMOS电路不能检测到高电平，需要进行电平转换



### 74系列IC

> `74LS`：TTL电平输入，TTL电平输出
>
> ![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230517160920.webp)
>
> `74HC`：CMOS电平输入，CMOS电平输出
>
> ![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230517175151.webp)
>
> ![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230517175218.webp)
>
> `74HCT`：TTL电平输入，CMOS电平输出
>
> ![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230517175851.webp)



### 电平转换应用

- 上拉电阻

1. 5V的TTL驱动5V的CMOS，可以通过简单的上拉电阻实现电平匹配
2. 3.3V的TTL驱动5V的CMOS，考虑可能存在电压钳位，比如单片机的GPIO口，不适合上拉电阻

- 电阻分压

如下图: 2.8V的GPRS模块对接3.3V的单片机

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230517202748.webp)

- 二极管

如下图: 2.8V的GPRS模块对接3.3V的单片机

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230517203627.webp)

- 三极管

1. 3.3V to 5V

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230517210046.webp)

`说明`: R1与Q1组成OC门，配合R2上拉至5V，实现电平转换。Tx输出0V，Q1导通，Rx端为0.3V左右;Tx输出3.3V，Q1截止，RX端

为5V，完成电平转换功能。

2. 5V to 3.3V

![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230517211153.webp)

`说明`: R3与Q2组成OC门，配合R5上拉至3.3V，实现电平转换。Tx输出0V，Q2导通；Rx端为0.3V左右;Tx输出5V，Q2截止，RX端
为3.3V，完成电平转换功能。

- 集成电路

如果需要转的比较多的话，就推荐使用集成IC，比较方便

以 `74VX4245` 为例：
![](https://image-1309791158.cos.ap-guangzhou.myqcloud.com/其他/QQ截图20230517211827.webp)



## 疑问

